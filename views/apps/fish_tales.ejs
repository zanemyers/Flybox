<main class="container py-3">
    <div class="row d-flex align-items-stretch">

        <!-- Instructions panel -->
        <div class="col-lg-5 mb-4 mb-lg-0 d-flex">
            <div class="p-4 bg-light border rounded flex-fill d-flex flex-column">

                <!-- What the tool does -->
                <h2 class="h4 mb-2">ğŸ› ï¸ What This Tool Does</h2>
                <p class="mb-4">
                    This tool collects and summarizes fly-fishing reports. It uses a starter file to find websites, scrapes them for report content, and summarizes the results using <strong>Google's Gemini API</strong>.
                </p>

                <!-- How to use the tool -->
                <h3 class="h5 mb-2">ğŸ“‹ How to Use It</h3>
                <div class="steps">
                    <div>
                        <span class="icon">ğŸ”</span>
                        Enter your <strong>Gemini API key</strong> (get one at
                        <a href="https://makersuite.google.com/app/apikey" target="_blank" rel="noopener noreferrer">makersuite.google.com</a>).
                    </div>
                    <div>
                        <span class="icon">â±ï¸</span>
                        Set the <strong>Max Report Age</strong> in days.
                    </div>
                    <div>
                        <span class="icon">ğŸŒŠ</span>
                        Enable <strong>Filter by Rivers</strong> to filter reports by river names.
                    </div>
                    <div>
                        <span class="icon">ğŸ“</span>
                        Import a <strong>Starter File</strong> (or use the <a href="/example_files/report_starter_file_ex.xlsx" download><strong>example file</strong></a>).
                    </div>

                    <!-- Advanced settings -->
                    <div><span class="icon">âš™ï¸</span> Advanced Settings</div>
                    <div class="steps mb-0" style="font-size: .85rem;">
                        <div>
                            <span class="icon">ğŸ’â€â™€ï¸ï¸</span>
                            Set the <strong>Model</strong> (view available models at
                            <a href="https://ai.google.dev/models/gemini" target="_blank" rel="noopener noreferrer">ai.google.dev</a>).
                        </div>
                        <div>
                            <span class="icon">ğŸ•¹ï¸</span>
                            Set an input <strong>Token Limit</strong> to control the maximum number of tokens used per request to the model.
                        </div>

                        <div>
                            <span class="icon">ğŸª</span>
                            Set the <strong>Crawl Depth</strong> to specify how many link levels the scraper should follow.
                        </div>
                        <div>
                            <span class="icon">ğŸ¤–</span>
                            Set the <strong>Summary Prompt</strong> to define how each report should be interpreted and summarized by the model.
                        </div>
                        <div>
                            <span class="icon">ğŸ§©</span>
                            Set the <strong>Merge Prompt</strong> to guide how multiple summaries should be combined into a single, coherent report.
                        </div>
                    </div>
                    <div>
                        <span class="icon">âœ…</span>
                        Click <strong>Run Search</strong> to begin scraping and summarizing.
                    </div>
                </div>

                <!-- About the default settings -->
                <h3 class="h5 mb-2">â„¹ï¸ About the Defaults</h3>
                <p class="mb-2">
                    By default, this tool uses the <strong>gemini-2.5-flash</strong> model with a <strong>50,000 token limit</strong>. It scrapes up to <strong>25 link levels deep</strong>, includes reports up to <strong>100 days old</strong>, and does not <strong>filter by river</strong>.
                </p>

                <!-- Privacy notice -->
                <p class="text-muted small mb-0">
                    ğŸ”’ <strong>Privacy Notice:</strong> All processing happens in memory. Your data is never stored.
                </p>
            </div>
        </div>

        <!-- Form panel -->
        <div id="formContainer" class="col-lg-7 d-flex">
            <%- include('forms/fish_tales_form.ejs', {summaryPrompt, mergePrompt}) %>
        </div>
    </div>
</main>
